#谈谈你对Activity生命周期的理解

首先，为什么Activity要有生命周期呢？我觉得这是移动设备的硬件特性和交互特性决定的。

首先从硬件上来说，移动设备不像是PC平台，它的CPU、内存、电量都受到了限制，特别是电量，你必须要保证开发出的App既能够满足用户需求，又不能很随意的去使用CPU进行高密度计算工作，所以如果用户临时不使用App的时候，要有一个机制来告诉我们开发的App：用户现在暂时不用了，不要做一些影响用户使用其他功能的事情。

除了电量之外，内存也是一个需要考虑的因素，Android基于Java开发，所以也有Java语言的一些特性，比如说在内存管理上，使用垃圾回收器来自动回收内存，虽然说减轻了开发者的工作量，但是GC发生的时间是不确定的，所以你不能够很好的保证用户使用App的时候，是否有足够的内存来分配对象。

除了硬件特性之外，手机这种设备的交互特性（比如屏幕大小、触摸操作），决定了你顶多只有一个App的界面会在前台，所以说，要有这样一个机制来告诉开发者：我们的App现在不在前台和用户交互了，优先级没有那么高，在后台不能做一些占用CPU和内存的事情影响到前台App的用户使用。

而解决这些问题的一个机制，就是Activity的生命周期。我们可以在onStop()发生的时候，暂停CPU密集运算、取消正在进行的网络连接、停止轮播图、退出死循环、去掉动画等一些列操作，来保证正在和用户交互的Activity拥有更多的硬件资源，来完成相关工作。

其次，从架构设计的角度来说，这也是一种很有效也很成熟的管理方式。其实不光Android上有生命周期，在网页开发中也会有生命周期，那么这种生命周期的方法有什么好处呢？

其实这种生命周期的方法，属于一种设计模式——模板设计模式。我认为，模板设计模式的实质，就是为了确定流程，而对每个流程的具体实现并不关心，你只要按照我这个顺序走就OK了，具体你想做什么，自己去实现吧！我们再来看一下Android，Activity是用来显示界面的，而显示界面的功能无非下面几个问题：

1. 要显示那个界面？
2. 界面里面的元素有什么行为？
3. 界面被部分遮挡住怎么办？
4. 界面看不见，被销毁怎么办？

我们在对应的看一下Activity的简单(无onRestart())生命周期：

1. onCreate()，通过setContent()设置要显示哪个界面，并定义界面元素的行为(设置点击事件等)
2. onStart()，一般很少处理
3. onResume()，界面即将可见，在这之后用户就可以与界面交互了，在这里可以注册一些接收者
4. onPause()，界面即将不可见或者是部分可见，在这里可以注销接受者
4. onStop()，界面不可见，我们可以取消轮播图的滚动
5. onDestory()，Activity即将销毁，我们要做好对象回收，避免内存泄露

所以说，我们只要按照每一个生命周期的方法，完成对应的工作，就可以让我们的Activity完整的显示出来。我们不需要考虑界面怎么画出来，点击事件怎么传递到按钮上去的，销毁回收工作是如何进行的，简简单单的完成生命周期的方法，就可以实现我们想要的效果。这就像是模板方法的典型应用场景——算法实现——所要达到的效果。我就想查找一个数，我定义一个方法给子类去重写，子类具体是二分法查找还是快速排序查找，我都不关心，你只要给我找出这个数，我就能按照流程完成相应的工作。对比一下你就会发现，这两者没有本质上的差别。

所以说，从手机设备的硬件特性、交互形式、架构设计来说，Activity的生命周期都是非常合适，而且非常必要的！

#关于我

江湖人称『凯子哥』，其实就是一个闷骚的90后技术宅，Android开发者，喜欢技术分享，热爱开源。

- 我的CSDN博客：[http://blog.csdn.net/zhaokaiqiang1992](http://blog.csdn.net/zhaokaiqiang1992)
- 我的微博：[裸奔的凯子哥](http://weibo.com/zhaokaiqiang1992)，每天会不定时分享高质量博客，欢迎关注
- 微信公众账号：kaizige1992

![](http://i12.tietuku.com/f55c34ddb1ba3830.jpg)